!function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var e=0;e<t.length;e++){var o=t[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,o.key,o)}}(self.webpackChunkinventory_web=self.webpackChunkinventory_web||[]).push([[714],{6714:function(e,o,i){i.r(o),i.d(o,{AddVendaModule:function(){return b}});var r=i(8583),c=i(9976),a=i(9598),d=i(1945),u=i(4188),g=i(7661),p=i(639),l=i(5855),f=i(6302),s=i(4930),m=i(9625),v=i(665),h=i(9577);function M(n,t){if(1&n&&(p.TgZ(0,"option",21),p._uU(1),p.qZA()),2&n){var e=t.$implicit;p.s9C("value",e.id),p.xp6(1),p.Oqu(e.name)}}function C(n,t){if(1&n&&(p.TgZ(0,"option",21),p._uU(1),p.qZA()),2&n){var e=t.$implicit;p.s9C("value",e.id),p.xp6(1),p.Oqu(e.name)}}function P(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"fa-icon",27),p.NdJ("click",function(){p.CHM(e);var n=p.oxw(),t=n.$implicit,o=n.index;return p.oxw().removeProd(t,o)}),p.qZA()}if(2&n){var o=p.oxw(2);p.Q6J("icon",o.faMinus)}}function _(n,t){if(1&n){var e=p.EpF();p.TgZ(0,"div",22),p.TgZ(1,"div",3),p.TgZ(2,"label"),p._uU(3,"Produto"),p.qZA(),p.TgZ(4,"select",23),p.NdJ("ngModelChange",function(n){return p.CHM(e).$implicit.productId=n})("change",function(n){var t=p.CHM(e).$implicit;return p.oxw().qtdChanged(n,t,1)}),p.YNc(5,C,2,2,"option",5),p.qZA(),p.qZA(),p.TgZ(6,"div",3),p.TgZ(7,"label"),p._uU(8,"Quantidade"),p.qZA(),p.TgZ(9,"input",24),p.NdJ("change",function(n){var t=p.CHM(e).$implicit;return p.oxw().qtdChanged(n,t,2)})("ngModelChange",function(n){return p.CHM(e).$implicit.quantity=n}),p.qZA(),p.qZA(),p.TgZ(10,"div",3),p.TgZ(11,"label"),p._uU(12,"Pre\xe7o"),p.qZA(),p.TgZ(13,"span",25),p._uU(14),p.ALo(15,"currency"),p.qZA(),p.qZA(),p.YNc(16,P,1,1,"fa-icon",26),p.qZA()}if(2&n){var o=t.$implicit,i=t.index,r=p.oxw();p.xp6(4),p.MGl("id","cat_",i,""),p.MGl("name","cat_",i,""),p.Q6J("ngModel",o.productId),p.xp6(1),p.Q6J("ngForOf",r.produtos),p.xp6(4),p.MGl("id","qtd_",i,""),p.MGl("name","qtd_",i,""),p.Q6J("ngModel",o.quantity),p.xp6(5),p.Oqu(p.xi3(15,9,o.price,"BRL")),p.xp6(2),p.Q6J("ngIf",0!=i)}}var O,x=((O=function(){function e(t,o,i,r){n(this,e),this.router=t,this.vendaService=o,this.clienteService=i,this.produtoService=r,this.faPlus=c.r8p,this.faMinus=c.Kl4,this.clientes=[],this.produtos=[],this.venda=new u.S}var o,i,r;return o=e,(i=[{key:"ngOnInit",value:function(){var n=this,t=new g.o;t.quantity=1,t.produto=new d.a,this.venda.vendaProdutos=[t],this.clienteService.getClientes().subscribe(function(t){n.clientes=t.map(function(n){var t=new a.c;return t.id=n.id,t.name=n.name,t})}),this.produtoService.getProdutos().subscribe(function(t){n.produtos=t.map(function(n){var t=new d.a;return t.id=n.id,t.name=n.name,t.price=n.price,t})})}},{key:"removeProd",value:function(n,t){var e;this.venda.vendaProdutos=null===(e=this.venda.vendaProdutos)||void 0===e?void 0:e.filter(function(n,e){return e!=t})}},{key:"addProduto",value:function(){var n,t=new g.o;t.quantity=1,null===(n=this.venda.vendaProdutos)||void 0===n||n.push(t)}},{key:"submit",value:function(){var n,t=this;if(0==this.venda.clientId||null==this.venda.clientId||""==this.venda.paymentMethod||null==this.venda.paymentMethod)alert("Preencha todos os campos");else{var e={};e.clientId=this.venda.clientId,e.paymentMethod=this.venda.paymentMethod,e.products=[];var o=!1;if(null===(n=this.venda.vendaProdutos)||void 0===n||n.map(function(n){null!=n.quantity&&null!=n.quantity&&n.quantity<=0&&(o=!0),e.products.push({id:n.productId,quantity:n.quantity})}),o)return void alert("Insira valores maiores que zero");e.isSaleComplete=!0,this.vendaService.criarVenda(e).subscribe(function(n){alert("Venda Cadastrada com sucesso"),t.router.navigate(["/vendas"])},function(n){401==n.status?(alert("Sess\xe3o expirada"),t.router.navigate(["/login"])):"PRODUCT_NOT_FOUND"==n.error.error?alert("Produto Incorreto"):"INVALID_QUANTITY"==n.error.error?alert("Quantidade excede estoque dispon\xedvel"):alert(JSON.stringify(n.error))})}}},{key:"qtdChanged",value:function(n,t,e){var o;if(t.productId&&null!=t.quantity&&null!=t.quantity){var i=this.produtos.find(function(n){return n.id==parseInt(t.productId+"")});if(t.quantity<=0)return void alert("Insira valores maiores que zero");i&&i.price&&(t.price=(null==i?void 0:i.price)*t.quantity,console.log(t.price))}else t.price=0;var r=0;null===(o=this.venda.vendaProdutos)||void 0===o||o.forEach(function(n){n.price&&(r+=n.price)}),this.venda.finalPrice=r}}])&&t(o.prototype,i),r&&t(o,r),e}()).\u0275fac=function(n){return new(n||O)(p.Y36(l.F0),p.Y36(f.O),p.Y36(s.$),p.Y36(m.m))},O.\u0275cmp=p.Xpm({type:O,selectors:[["app-add-venda"]],decls:40,vars:9,consts:[[1,"container"],[1,"title"],["role","form","name","produtoForm","novalidate","novalidate","data-parsley-priority-enabled","false","method","post","autocomplete","off"],[1,"formGroup"],["id","cat","name","cat",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["id","cat1","name","cat1",3,"ngModel","ngModelChange"],["value","CARTAO_CREDITO"],["value","CARTAO_DEBITO"],["value","BOLETO"],["value","PIX"],["value","Dinheiro"],[1,"sub-title"],[1,"prodcutsWp"],["class","products formGroup2",4,"ngFor","ngForOf"],[1,"total"],[1,"btnDiv","btnDivAdd"],["type","button",1,"btnSubmit",3,"click"],[3,"icon"],[1,"btnDiv"],["type","submit",1,"btnSubmit",3,"click"],[3,"value"],[1,"products","formGroup2"],[3,"ngModel","id","name","ngModelChange","change"],["type","number","min","1",3,"ngModel","id","name","change","ngModelChange"],[1,"vpPrice"],["class","removeProd",3,"icon","click",4,"ngIf"],[1,"removeProd",3,"icon","click"]],template:function(n,t){1&n&&(p.TgZ(0,"div",0),p.TgZ(1,"div",1),p.TgZ(2,"h1"),p._uU(3,"ADICIONAR VENDA"),p.qZA(),p.qZA(),p.TgZ(4,"form",2),p.TgZ(5,"div",3),p.TgZ(6,"label"),p._uU(7,"Cliente"),p.qZA(),p.TgZ(8,"select",4),p.NdJ("ngModelChange",function(n){return t.venda.clientId=n}),p.YNc(9,M,2,2,"option",5),p.qZA(),p.qZA(),p.TgZ(10,"div",3),p.TgZ(11,"label"),p._uU(12,"M\xe9todo de Pagamento"),p.qZA(),p.TgZ(13,"select",6),p.NdJ("ngModelChange",function(n){return t.venda.paymentMethod=n}),p.TgZ(14,"option",7),p._uU(15,"Cart\xe3o de Cr\xe9dito"),p.qZA(),p.TgZ(16,"option",8),p._uU(17,"Cart\xe3o de D\xe9bito"),p.qZA(),p.TgZ(18,"option",9),p._uU(19,"Boleto"),p.qZA(),p.TgZ(20,"option",10),p._uU(21,"PIX"),p.qZA(),p.TgZ(22,"option",11),p._uU(23,"Dinheiro"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(24,"div",12),p.TgZ(25,"h1"),p._uU(26,"Produtos"),p.qZA(),p.qZA(),p.TgZ(27,"div",13),p.YNc(28,_,17,12,"div",14),p.TgZ(29,"div",15),p.TgZ(30,"b"),p._uU(31),p.ALo(32,"currency"),p.qZA(),p.qZA(),p.TgZ(33,"div",16),p.TgZ(34,"button",17),p.NdJ("click",function(){return t.addProduto()}),p._UZ(35,"fa-icon",18),p._uU(36," Adicionar Produto"),p.qZA(),p.qZA(),p.qZA(),p.TgZ(37,"div",19),p.TgZ(38,"button",20),p.NdJ("click",function(){return t.submit()}),p._uU(39,"Cadastrar"),p.qZA(),p.qZA(),p.qZA(),p.qZA()),2&n&&(p.xp6(8),p.Q6J("ngModel",t.venda.clientId),p.xp6(1),p.Q6J("ngForOf",t.clientes),p.xp6(4),p.Q6J("ngModel",t.venda.paymentMethod),p.xp6(15),p.Q6J("ngForOf",t.venda.vendaProdutos),p.xp6(3),p.hij("Total: ",p.xi3(32,6,t.venda.finalPrice,"BRL"),""),p.xp6(4),p.Q6J("icon",t.faPlus))},directives:[v._Y,v.JL,v.F,v.EJ,v.JJ,v.On,r.sg,v.YN,v.Kr,h.BN,v.qQ,v.wV,v.Fj,r.O5],pipes:[r.H9],styles:[".container[_ngcontent-%COMP%]{padding:30px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;width:100%;background-color:#9364f1;padding:5px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:25px;margin:10px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:50px;justify-content:center;display:flex;align-items:center;flex-direction:column}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:10px;color:#534962}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#fff;width:340px;border-radius:15px;box-shadow:none;outline:none;border:1px solid #9671f1;font-size:16px;padding:15px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-right:15px;width:370px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .formGroupMoney[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .formGroupMoney[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #9671f1;height:48px;border-right:none;border-radius:15px 0 0 15px;display:flex;align-items:center;padding:0 15px;font-size:20px;color:#fff;background:#9671f1}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .formGroupMoney[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100px;border-left:none;border-radius:0 15px 15px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup2[_ngcontent-%COMP%]{display:flex;grid-column-gap:50px;-moz-column-gap:50px;column-gap:50px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup2[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnDiv[_ngcontent-%COMP%]{display:flex;grid-column-gap:50px;-moz-column-gap:50px;column-gap:50px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnSubmit[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:2rem;border:none;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#ccd1ff;color:#5e17eb;border-radius:50px;font-size:20px;cursor:pointer;padding:16px 40px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnDelete[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:2rem;border:none;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#ff4646;color:#fff;border-radius:50px;font-size:20px;cursor:pointer;padding:16px 40px}.sub-title[_ngcontent-%COMP%]{text-align:center;width:50%;background-color:#9364f1;padding:5px;margin:30px auto 0}.sub-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin:5px 0}.btnDivAdd[_ngcontent-%COMP%]{justify-content:end}.btnDivAdd[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:15px!important;padding:11px!important}.formGroup2[_ngcontent-%COMP%]{align-items:center}.removeProd[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:2rem;border:none;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#ccd1ff;color:#5e17eb;border-radius:50px;font-size:20px;cursor:pointer;font-size:15px;padding:13px}.vpPrice[_ngcontent-%COMP%]{height:50px;vertical-align:middle;line-height:50px;text-align:center}.total[_ngcontent-%COMP%]{text-align:right}"]}),O),b=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=p.oAB({type:t}),t.\u0275inj=p.cJS({providers:[s.$,m.m,f.O],imports:[[r.ez,l.Bz.forChild([{path:"",component:x}]),v.u5,h.uH]]}),t}()}}])}();