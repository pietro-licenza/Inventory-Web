"use strict";(self.webpackChunkinventory_web=self.webpackChunkinventory_web||[]).push([[923],{9923:function(t,n,e){e.r(n),e.d(n,{ComprasModule:function(){return x}});var o=e(8583),r=e(9976),i=e(7501),c=e(4619),a=e(4294),g=e(1945),d=e(639),p=e(5855),s=e(3534),u=e(9577);function P(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"h4",10),d.NdJ("click",function(){d.CHM(t);const n=d.oxw().$implicit;return d.oxw().goToDetail(n)}),d._UZ(1,"fa-icon",11),d.qZA()}if(2&t){const t=d.oxw(2);d.xp6(1),d.Q6J("icon",t.faInfo)}}function l(t,n){if(1&t&&(d.TgZ(0,"div",9),d.TgZ(1,"h4",4),d._uU(2),d.ALo(3,"date"),d.qZA(),d.TgZ(4,"h4",4),d._uU(5),d.qZA(),d.YNc(6,P,2,1,"h4",8),d.qZA()),2&t){const t=n.$implicit,e=d.oxw();d.xp6(2),d.Oqu(d.xi3(3,3,null==t?null:t.data,"dd/MM/yyyy")),d.xp6(3),d.Oqu(null==t||null==t.fornecedor?null:t.fornecedor.name),d.xp6(1),d.Q6J("ngIf","compra"==e.role||"admin"==e.role)}}function f(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"div",12),d.TgZ(1,"div",13),d.TgZ(2,"div",14),d.TgZ(3,"fa-icon",15),d.NdJ("click",function(){return d.CHM(t),d.oxw().getPrevPage()}),d.qZA(),d.qZA(),d.TgZ(4,"div",14),d.TgZ(5,"fa-icon",15),d.NdJ("click",function(){return d.CHM(t),d.oxw().getNextPage()}),d.qZA(),d.qZA(),d.qZA(),d.qZA()}if(2&t){const t=d.oxw();d.xp6(3),d.ekj("desativado",1===t.currentPage),d.Q6J("icon",t.faLeft),d.xp6(2),d.ekj("desativado",t.currentPage===t.pages),d.Q6J("icon",t.faRight)}}function h(t,n){if(1&t){const t=d.EpF();d.TgZ(0,"button",10),d.NdJ("click",function(){return d.CHM(t),d.oxw().addCompra()}),d._uU(1,"+"),d.qZA()}}let C=(()=>{class t{constructor(t,n){this.router=t,this.compraService=n,this.compras=[],this.faInfo=r.YHc,this.fornecedores=[],this.produtos=[],this.role="",this.faLeft=r.A35,this.faRight=r._tD,this.currentPage=1,this.pages=null,this.itemsPerPage=5}ngOnInit(){this.role=localStorage.getItem("inventory-role")+"",this.compraService.getCompras().subscribe(t=>{this.compras=t.map(t=>{let n=new i.b;n.id=t.id,n.providerId=t.providerId,n.data=t.updatedAt,n.fornecedor=new a.u,n.fornecedor.id=t.provider.id,n.fornecedor.name=t.provider.name,n.fornecedor.email=t.provider.email;let e=t.products.map(t=>{let n=new c.m;n.quantity=t.quantity;let e=new g.a;return e.id=t.product.id,e.name=t.product.name,e.price=t.product.price,e.quantity=t.product.quantity,e.createdAt=t.product.createdAt,e.updatedAt=t.product.updatedAt,e.categoryId=t.product.categoryId,n.produto=e,n});return n.compraProdutos=e,n}),this.pages=Math.ceil(this.compras.length/this.itemsPerPage),this.getItensPage()},t=>{401==t.status&&this.router.navigate(["/login"])})}goToDetail(t){this.router.navigate(["/detalhe-compra"],{state:{compra:t}})}addCompra(){this.router.navigate(["/add-compra"])}getNextPage(){this.pages&&this.currentPage<this.pages&&this.currentPage++}getPrevPage(){this.pages&&this.currentPage>1&&this.currentPage--}getItensPage(){var t;let n=this.currentPage;var e=0,o=0;return 1==n?(e=0,o=this.itemsPerPage-1):(e=(n-1)*this.itemsPerPage,o=n*this.itemsPerPage-1),null===(t=this.compras)||void 0===t?void 0:t.filter((t,n)=>e<=n&&n<=o)}}return t.\u0275fac=function(n){return new(n||t)(d.Y36(p.F0),d.Y36(s.L))},t.\u0275cmp=d.Xpm({type:t,selectors:[["app-compras"]],decls:15,vars:3,consts:[[1,"container"],[1,"title"],[1,"produtosDiv"],[1,"produtoCats"],[1,"name"],["class","produto",4,"ngFor","ngForOf"],["class","pagination",4,"ngIf"],[1,"addProduct"],[3,"click",4,"ngIf"],[1,"produto"],[3,"click"],[3,"icon"],[1,"pagination"],[1,"buttonsPag"],[1,"btnPag"],[3,"icon","click"]],template:function(t,n){1&t&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"h1"),d._uU(3,"COMPRAS"),d.qZA(),d.qZA(),d.TgZ(4,"div",2),d.TgZ(5,"div",3),d.TgZ(6,"h4",4),d._uU(7,"Data Compra"),d.qZA(),d.TgZ(8,"h4",4),d._uU(9,"Fornecedor"),d.qZA(),d._UZ(10,"h4"),d.qZA(),d.YNc(11,l,7,6,"div",5),d.qZA(),d.YNc(12,f,6,6,"div",6),d.TgZ(13,"div",7),d.YNc(14,h,2,0,"button",8),d.qZA(),d.qZA()),2&t&&(d.xp6(11),d.Q6J("ngForOf",n.getItensPage()),d.xp6(1),d.Q6J("ngIf",n.pages&&n.pages>1),d.xp6(2),d.Q6J("ngIf","compra"==n.role||"admin"==n.role))},directives:[o.sg,o.O5,u.BN],pipes:[o.uU],styles:[".container[_ngcontent-%COMP%]{padding:30px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;width:100%;background-color:#9364f1;padding:5px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:25px;margin:10px 0}.container[_ngcontent-%COMP%]   .produtoCats[_ngcontent-%COMP%]{display:flex;margin:30px 10px 0 30px}.container[_ngcontent-%COMP%]   .produtoCats[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{flex:1;text-align:center;margin:5px}.container[_ngcontent-%COMP%]   .produtoCats[_ngcontent-%COMP%]   h4.name[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .produtoCats[_ngcontent-%COMP%]   h4.categoria[_ngcontent-%COMP%]{flex:2}.container[_ngcontent-%COMP%]   .produtosDiv[_ngcontent-%COMP%]{width:60%;margin:10px auto 0}.container[_ngcontent-%COMP%]   .produtosDiv[_ngcontent-%COMP%]   .produto[_ngcontent-%COMP%]{width:calc(100% - 40px);border:1px solid #cacaca;border-radius:30px;margin:20px;padding:10px;display:flex}.container[_ngcontent-%COMP%]   .produtosDiv[_ngcontent-%COMP%]   .produto[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{flex:1;text-align:center;margin:5px}.container[_ngcontent-%COMP%]   .produtosDiv[_ngcontent-%COMP%]   .produto[_ngcontent-%COMP%]   h4.name[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   .produtosDiv[_ngcontent-%COMP%]   .produto[_ngcontent-%COMP%]   h4.categoria[_ngcontent-%COMP%]{flex:2}.container[_ngcontent-%COMP%]   .addProduct[_ngcontent-%COMP%]{position:fixed;bottom:40px;right:40px}.container[_ngcontent-%COMP%]   .addProduct[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;background:#9671f1;border-radius:30px;color:#fff;width:50px;height:49px;padding:0;margin:0;font-size:40px;font-weight:bold;cursor:pointer}.container[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{cursor:pointer}.buttonsPag[_ngcontent-%COMP%]{display:flex;justify-content:center;grid-column-gap:30px;-moz-column-gap:30px;column-gap:30px;padding:30px 0}.buttonsPag[_ngcontent-%COMP%]   .btnPag[_ngcontent-%COMP%]   fa-icon[_ngcontent-%COMP%]{font-size:1.5rem}.buttonsPag[_ngcontent-%COMP%]   .btnPag[_ngcontent-%COMP%]   fa-icon.desativado[_ngcontent-%COMP%]{color:#cacaca}"]}),t})();var m=e(665),_=e(2385),M=e(9625);let x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=d.oAB({type:t}),t.\u0275inj=d.cJS({providers:[s.L,_.p,M.m],imports:[[o.ez,p.Bz.forChild([{path:"",component:C}]),m.u5,u.uH]]}),t})()}}]);