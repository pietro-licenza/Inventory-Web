!function(){"use strict";function n(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function t(n,t){for(var o=0;o<t.length;o++){var e=t[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}(self.webpackChunkinventory_web=self.webpackChunkinventory_web||[]).push([[701],{2701:function(o,e,i){i.r(e),i.d(e,{AddCompraModule:function(){return y}});var r=i(8583),c=i(9976),a=i(7120),d=i(7501),p=i(4619),u=i(4294),g=i(1945),l=i(639),f=i(5855),m=i(3534),s=i(2385),M=i(9625),v=i(1072),C=i(665),h=i(9577);function _(n,t){if(1&n&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&n){var o=t.$implicit;l.s9C("value",o.id),l.xp6(1),l.Oqu(o.name)}}function x(n,t){if(1&n&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&n){var o=t.$implicit;l.s9C("value",o.id),l.xp6(1),l.Oqu(o.name)}}function P(n,t){if(1&n){var o=l.EpF();l.TgZ(0,"fa-icon",24),l.NdJ("click",function(){l.CHM(o);var n=l.oxw(),t=n.$implicit,e=n.index;return l.oxw().removeProd(t,e)}),l.qZA()}if(2&n){var e=l.oxw(2);l.Q6J("icon",e.faMinus)}}function O(n,t){if(1&n&&(l.TgZ(0,"option",15),l._uU(1),l.qZA()),2&n){var o=t.$implicit;l.s9C("value",o.id),l.xp6(1),l.Oqu(o.name)}}function Z(n,t){if(1&n){var o=l.EpF();l.TgZ(0,"div",25),l.TgZ(1,"div",3),l.TgZ(2,"label"),l._uU(3,"Nome do Produto"),l.qZA(),l.TgZ(4,"input",26),l.NdJ("ngModelChange",function(n){return l.CHM(o),l.oxw().$implicit.produto.name=n}),l.qZA(),l.qZA(),l.TgZ(5,"div",3),l.TgZ(6,"label"),l._uU(7,"Categoria"),l.qZA(),l.TgZ(8,"select",27),l.NdJ("ngModelChange",function(n){return l.CHM(o),l.oxw().$implicit.produto.categoryId=n}),l.YNc(9,O,2,2,"option",5),l.qZA(),l.qZA(),l.TgZ(10,"div",28),l.TgZ(11,"div",29),l.TgZ(12,"div",3),l.TgZ(13,"label"),l._uU(14,"Pre\xe7o"),l.qZA(),l.TgZ(15,"div",30),l.TgZ(16,"span"),l._uU(17,"R$"),l.qZA(),l.TgZ(18,"input",31),l.NdJ("ngModelChange",function(n){return l.CHM(o),l.oxw().$implicit.produto.price=n}),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA(),l.qZA()}if(2&n){var e=l.oxw(),i=e.index,r=e.$implicit,c=l.oxw();l.xp6(4),l.MGl("id","name_",i,""),l.MGl("name","name_",i,""),l.Q6J("ngModel",r.produto.name),l.xp6(4),l.MGl("id","cat2_",i,""),l.MGl("name","cat2_",i,""),l.Q6J("ngModel",r.produto.categoryId),l.xp6(1),l.Q6J("ngForOf",c.categorias),l.xp6(9),l.MGl("id","price2_",i,""),l.MGl("name","price2__",i,""),l.Q6J("ngModel",r.produto.price)}}function b(n,t){if(1&n){var o=l.EpF();l.TgZ(0,"div",16),l.TgZ(1,"div",17),l.TgZ(2,"div",3),l.TgZ(3,"label"),l._uU(4,"Produto"),l.qZA(),l.TgZ(5,"select",18),l.NdJ("ngModelChange",function(n){return l.CHM(o).$implicit.productId=n})("change",function(){var n=l.CHM(o).$implicit;return l.oxw().qtdChanged(n)}),l.YNc(6,x,2,2,"option",5),l.TgZ(7,"option",19),l._uU(8,"Novo Produto"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(9,"div",3),l.TgZ(10,"label"),l._uU(11,"Quantidade"),l.qZA(),l.TgZ(12,"input",20),l.NdJ("change",function(){var n=l.CHM(o).$implicit;return l.oxw().qtdChanged(n)})("ngModelChange",function(n){return l.CHM(o).$implicit.quantity=n}),l.qZA(),l.qZA(),l.TgZ(13,"div",3),l.TgZ(14,"label"),l._uU(15,"Pre\xe7o"),l.qZA(),l.TgZ(16,"span",21),l._uU(17),l.ALo(18,"currency"),l.qZA(),l.qZA(),l.YNc(19,P,1,1,"fa-icon",22),l.qZA(),l.YNc(20,Z,19,10,"div",23),l.qZA()}if(2&n){var e=t.$implicit,i=t.index,r=l.oxw();l.xp6(5),l.MGl("id","cat_",i,""),l.MGl("name","cat_",i,""),l.Q6J("ngModel",e.productId),l.xp6(1),l.Q6J("ngForOf",r.produtos),l.xp6(6),l.MGl("id","qtd_",i,""),l.MGl("name","qtd_",i,""),l.Q6J("ngModel",e.quantity),l.xp6(5),l.Oqu(l.xi3(18,10,e.price,"BRL")),l.xp6(2),l.Q6J("ngIf",0!=i),l.xp6(1),l.Q6J("ngIf",99999==e.productId&&e.produto)}}var q,A=((q=function(){function o(t,e,i,r,a){n(this,o),this.router=t,this.compraService=e,this.fornecedorService=i,this.produtoService=r,this.categoriaService=a,this.faPlus=c.r8p,this.faMinus=c.Kl4,this.fornecedores=[],this.produtos=[],this.categorias=[],this.compra=new d.b}var e,i,r;return e=o,(i=[{key:"ngOnInit",value:function(){var n=this,t=new p.m;t.quantity=1,t.produto=new g.a,t.produto.price=0,t.produto.name="",this.compra.compraProdutos=[t],this.categoriaService.getCategorias().subscribe(function(t){n.categorias=t.map(function(n){var t=new a.E;return t.id=n.id,t.name=n.name,t})}),this.fornecedorService.getFornecedores().subscribe(function(t){n.fornecedores=t.map(function(n){var t=new u.u;return t.id=n.id,t.name=n.name,t})}),this.produtoService.getProdutos().subscribe(function(t){n.produtos=t.map(function(n){var t=new g.a;return t.id=n.id,t.name=n.name,t.price=n.price,t})})}},{key:"removeProd",value:function(n,t){var o;this.compra.compraProdutos=null===(o=this.compra.compraProdutos)||void 0===o?void 0:o.filter(function(n,o){return o!=t})}},{key:"addProduto",value:function(){var n,t=new p.m;t.quantity=1,t.produto=new g.a,t.produto.price=0,t.produto.name="",null===(n=this.compra.compraProdutos)||void 0===n||n.push(t)}},{key:"submit",value:function(){var n,t=this;if(0==this.compra.providerId||null==this.compra.providerId)alert("Preencha todos os campos");else{var o={};o.providerId=this.compra.providerId,o.products=[];var e=!1;if(null===(n=this.compra.compraProdutos)||void 0===n||n.map(function(n){var t,i,r;(null!=n.quantity&&null!=n.quantity&&n.quantity<=0||!n.productId&&null!=n.produto&&null!=n.produto&&null!=n.produto.price&&null!=n.produto.price&&n.produto.price<=0)&&(e=!0),o.products.push({id:n.productId,quantity:n.quantity,name:null===(t=n.produto)||void 0===t?void 0:t.name,categoryId:null===(i=n.produto)||void 0===i?void 0:i.categoryId,price:null===(r=n.produto)||void 0===r?void 0:r.price})}),e)return void alert("Insira valores maiores que zero");this.compraService.criarCompra(o).subscribe(function(n){alert("Compra Cadastrada com sucesso"),t.router.navigate(["/compras"])},function(n){401==n.status?(alert("Sess\xe3o expirada"),t.router.navigate(["/login"])):"PRODUCT_NOT_FOUND"==n.error.error?alert("Produto Incorreto"):"INVALID_QUANTITY"==n.error.error?alert("Quantidade excede estoque dispon\xedvel"):alert(JSON.stringify(n.error))})}}},{key:"qtdChanged",value:function(n){var t;if(n.productId&&null!=n.quantity&&null!=n.quantity){if(n.quantity<=0)return void alert("Insira valores maiores que zero");if(99999==n.productId&&n.produto&&n.produto.price)n.price=n.produto.price*n.quantity;else{var o=this.produtos.find(function(t){return t.id==parseInt(n.productId+"")});o&&o.price&&(n.price=(null==o?void 0:o.price)*n.quantity)}}else n.price=0;var e=0;null===(t=this.compra.compraProdutos)||void 0===t||t.forEach(function(n){n.price&&(e+=n.price)}),this.compra.finalPrice=e}}])&&t(e.prototype,i),r&&t(e,r),o}()).\u0275fac=function(n){return new(n||q)(l.Y36(f.F0),l.Y36(m.L),l.Y36(s.p),l.Y36(M.m),l.Y36(v.n))},q.\u0275cmp=l.Xpm({type:q,selectors:[["app-add-compra"]],decls:26,vars:8,consts:[[1,"container"],[1,"title"],["role","form","name","produtoForm","novalidate","novalidate","data-parsley-priority-enabled","false","method","post","autocomplete","off"],[1,"formGroup"],["id","cat","name","cat",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"sub-title"],[1,"prodcutsWp"],["class","products formGroup2",4,"ngFor","ngForOf"],[1,"total"],[1,"btnDiv","btnDivAdd"],["type","button",1,"btnSubmit",3,"click"],[3,"icon"],[1,"btnDiv"],["type","submit",1,"btnSubmit",3,"click"],[3,"value"],[1,"products","formGroup2"],[1,"firstLine"],[3,"ngModel","id","name","ngModelChange","change"],["value","99999"],["type","number","min","1",3,"ngModel","id","name","change","ngModelChange"],[1,"vpPrice"],["class","removeProd",3,"icon","click",4,"ngIf"],["class","secondLine",4,"ngIf"],[1,"removeProd",3,"icon","click"],[1,"secondLine"],["type","text",3,"ngModel","id","name","ngModelChange"],[3,"ngModel","id","name","ngModelChange"],[1,"formGroup2"],[1,"column"],[1,"formGroupMoney"],["type","number","min","0.1",3,"ngModel","id","name","ngModelChange"]],template:function(n,t){1&n&&(l.TgZ(0,"div",0),l.TgZ(1,"div",1),l.TgZ(2,"h1"),l._uU(3,"ADICIONAR COMPRA"),l.qZA(),l.qZA(),l.TgZ(4,"form",2),l.TgZ(5,"div",3),l.TgZ(6,"label"),l._uU(7,"Fornecedor"),l.qZA(),l.TgZ(8,"select",4),l.NdJ("ngModelChange",function(n){return t.compra.providerId=n}),l.YNc(9,_,2,2,"option",5),l.qZA(),l.qZA(),l.TgZ(10,"div",6),l.TgZ(11,"h1"),l._uU(12,"Produtos"),l.qZA(),l.qZA(),l.TgZ(13,"div",7),l.YNc(14,b,21,13,"div",8),l.TgZ(15,"div",9),l.TgZ(16,"b"),l._uU(17),l.ALo(18,"currency"),l.qZA(),l.qZA(),l.TgZ(19,"div",10),l.TgZ(20,"button",11),l.NdJ("click",function(){return t.addProduto()}),l._UZ(21,"fa-icon",12),l._uU(22," Adicionar Produto"),l.qZA(),l.qZA(),l.qZA(),l.TgZ(23,"div",13),l.TgZ(24,"button",14),l.NdJ("click",function(){return t.submit()}),l._uU(25,"Cadastrar"),l.qZA(),l.qZA(),l.qZA(),l.qZA()),2&n&&(l.xp6(8),l.Q6J("ngModel",t.compra.providerId),l.xp6(1),l.Q6J("ngForOf",t.fornecedores),l.xp6(5),l.Q6J("ngForOf",t.compra.compraProdutos),l.xp6(3),l.hij("Total: ",l.xi3(18,5,t.compra.finalPrice,"BRL"),""),l.xp6(4),l.Q6J("icon",t.faPlus))},directives:[C._Y,C.JL,C.F,C.EJ,C.JJ,C.On,r.sg,h.BN,C.YN,C.Kr,C.qQ,C.wV,C.Fj,r.O5],pipes:[r.H9],styles:[".container[_ngcontent-%COMP%]{padding:30px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;width:100%;background-color:#9364f1;padding:5px}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:25px;margin:10px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{padding:50px;justify-content:center;display:flex;align-items:center;flex-direction:column}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:20px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:bold;margin-bottom:10px;color:#534962}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#fff;width:340px;border-radius:15px;box-shadow:none;outline:none;border:1px solid #9671f1;font-size:16px;padding:15px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding-right:15px;width:370px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .formGroupMoney[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .formGroupMoney[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border:1px solid #9671f1;height:48px;border-right:none;border-radius:15px 0 0 15px;display:flex;align-items:center;padding:0 15px;font-size:20px;color:#fff;background:#9671f1}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup[_ngcontent-%COMP%]   .formGroupMoney[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100px;border-left:none;border-radius:0 15px 15px 0}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup2[_ngcontent-%COMP%]{display:flex;grid-column-gap:50px;-moz-column-gap:50px;column-gap:50px;flex-direction:column}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .formGroup2[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnDiv[_ngcontent-%COMP%]{display:flex;grid-column-gap:50px;-moz-column-gap:50px;column-gap:50px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnSubmit[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:2rem;border:none;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#ccd1ff;color:#5e17eb;border-radius:50px;font-size:20px;cursor:pointer;padding:16px 40px}.container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .btnDelete[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:2rem;border:none;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#ff4646;color:#fff;border-radius:50px;font-size:20px;cursor:pointer;padding:16px 40px}.sub-title[_ngcontent-%COMP%]{text-align:center;width:50%;background-color:#9364f1;padding:5px;margin:30px auto 0}.sub-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#fff;font-size:18px;margin:5px 0}.btnDivAdd[_ngcontent-%COMP%]{justify-content:end}.btnDivAdd[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:15px!important;padding:11px!important}.formGroup2[_ngcontent-%COMP%]{align-items:center}.removeProd[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-top:2rem;border:none;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;background:#ccd1ff;color:#5e17eb;border-radius:50px;font-size:20px;cursor:pointer;font-size:15px;padding:13px}.vpPrice[_ngcontent-%COMP%]{height:50px;vertical-align:middle;line-height:50px;text-align:center}.total[_ngcontent-%COMP%]{text-align:right}.firstLine[_ngcontent-%COMP%], .secondLine[_ngcontent-%COMP%]{display:flex;grid-column-gap:50px;-moz-column-gap:50px;column-gap:50px}.firstLine[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .secondLine[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100px}"]}),q),y=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.oAB({type:t}),t.\u0275inj=l.cJS({providers:[s.p,M.m,m.L,v.n],imports:[[r.ez,f.Bz.forChild([{path:"",component:A}]),C.u5,h.uH]]}),t}()}}])}();